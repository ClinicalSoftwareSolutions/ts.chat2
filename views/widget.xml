<Alloy>
    <Collection src="message" />

    <View id="container">
        <ListView id="listView" onSingletap="_snatchFocus" defaultItemTemplate="messageOnTheLeft" >
            

            <Templates>
                <ItemTemplate name="messageOnTheLeft">
                    <View class="listItem">
                        <View class="message-container">
                            <Label class="message left" bindId="message" />
                        </View>
                        <Label class="date" binId="messageDate" />
                    </View>
                </ItemTemplate>

                <ItemTemplate name="messageOnTheRight">
                    <View class="listItem">
                        <View class="message-container">
                            <Label class="message right" bindId="message" />
                        </View>
                        <Label class="date" binId="messageDate" />
                    </View>
                </ItemTemplate>
            </Templates>


            <ListSection dataCollection="message" dataFunction="renderMessages" >
                <ListItem message:text="{content}" messageDate:text="{date}" />
            </ListSection>


        </ListView>
        <View id="chatTextFieldContainer">
            <Label id="separator" />
            <View id="subSeparator">
                <TextArea id="typingArea" onChange="_resizeTypingArea" />
                <View id="btnWrapper">
                    <Button id="sendBtn" title=">" onClick="_send" />
                </View>
            </View>
        </View>
    </View>
</Alloy>
